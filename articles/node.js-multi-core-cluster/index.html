<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><link href="/favicon/favicon-96x96.png" rel="icon" sizes="96x96" type="image/png"><link href="/favicon/favicon.svg" rel="icon" type="image/svg+xml"><link href="/favicon/favicon.ico" rel="shortcut icon"><link href="/favicon/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180"><meta content="shapkarin.me" name="apple-mobile-web-app-title"><link href="/favicon/site.webmanifest" rel="manifest"><meta content="width=device-width,initial-scale=1" name="viewport"><meta content="#000000" name="theme-color"><title>Unlocking Node.js Performance: Harnessing Multi-Core Power with the cluster Module | Yuri Shapkarin</title><meta content="Yuri Shapkarin's personal website. Experienced Software Engineer." name="description"><script type="text/javascript">!function(){"use strict";!function(){const e=window.location;let t=e.pathname;if(e.pathname.endsWith("//")&&(t=e.pathname.replace(/\/+$/,"/")||"/",console.log("Normalized double trailing slash:",t+e.search+e.hash)),t!==e.pathname){var a=document.createElement("link");a.setAttribute("rel","canonical"),a.setAttribute("href",t),document.head.appendChild(a),window.location.replace(t+e.search+e.hash)}}()}()</script><meta content="website" property="og:type"><meta content="Yuri Shapkarin | Software Developer" property="og:title"><meta content="Yuri Shapkarin's personal website" property="og:description"><meta content="https://shapkarin.me" property="og:url"><meta content="Yuri Shapkarin" name="twitter:creator"><meta content="website" name="twitter:card"><meta content="Yuri Shapkarin | Software Developer" name="twitter:title"><meta content="Yuri Shapkarin's personal website" name="twitter:description"><link href="https://fonts.googleapis.com/css?family=Lato:300" rel="stylesheet"><title>Yuri Shapkarin</title><link href="https://fonts.googleapis.com" rel="preconnect"><link href="https://fonts.gstatic.com" rel="preconnect" crossorigin=""><link href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&family=Roboto:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet"><script defer src="/static/js/main.4c546719.js"></script><link href="/static/css/main.64686a64.css" rel="stylesheet"><link href="https://fonts.googleapis.com" rel="preconnect"><link href="https://fonts.gstatic.com" rel="preconnect"><link href="https://raw.githubusercontent.com" rel="preconnect"><link href="https://shapkarin.me/articles/node.js-multi-core-cluster/" rel="canonical" data-react-helmet="true"><meta content="Learn how to effectively utilize all CPU cores in your Node.js applications using the built-in cluster module, improve performance and resilience, and understand when this approach is preferable to other scaling solutions." name="description" data-react-helmet="true"><meta content="" name="keywords" data-react-helmet="true"><meta content="article" data-react-helmet="true" property="og:type"><meta content="Unlocking Node.js Performance: Harnessing Multi-Core Power with the cluster Module | Yuri Shapkarin" data-react-helmet="true" property="og:title"><meta content="Learn how to effectively utilize all CPU cores in your Node.js applications using the built-in cluster module, improve performance and resilience, and understand when this approach is preferable to other scaling solutions." data-react-helmet="true" property="og:description"><meta content="https://shapkarin.me/articles/node.js-multi-core-cluster/" data-react-helmet="true" property="og:url"><meta content="Yuri Shapkarin" name="twitter:creator" data-react-helmet="true"><meta content="article" name="twitter:card" data-react-helmet="true"><meta content="Unlocking Node.js Performance: Harnessing Multi-Core Power with the cluster Module | Yuri Shapkarin" name="twitter:title" data-react-helmet="true"><meta content="Learn how to effectively utilize all CPU cores in your Node.js applications using the built-in cluster module, improve performance and resilience, and understand when this approach is preferable to other scaling solutions." name="twitter:description" data-react-helmet="true"><script type="application/ld+json" data-react-helmet="true">null</script></head><body><div id="root"><a href="#menu" class="a11y hidden">Go to Menu</a><div class="About"><a href="/" class="About_greeting">Hello everyone!</a> My name is Yuri Shapkarin. I am a software engineer with over a decade of experience and a solid foundation in Computer Science. My work reflects a firm commitment to innovation, problem-solving, and delivering exceptional user experiences.<a href="https://www.linkedin.com/in/shapkarin" target="_blank" rel="noreferrer" class="Social_Link">LinkedIn<svg fill="none" height="12" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" width="12" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" style="margin-left:2px"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" x2="21" y1="14" y2="3"></line></svg></a><a href="https://github.com/shapkarin" target="_blank" rel="noreferrer" class="Social_Link">GitHub<svg fill="none" height="12" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" width="12" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" style="margin-left:2px"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" x2="21" y1="14" y2="3"></line></svg></a><span class="About_email">Get my email</span><em class="Disclaimer">Disclaimer: homepage has been gradually developed <a href="https://web.archive.org/web/20130801000000*/shapkarin.me" target="_blank" rel="noreferrer">since 2013<svg fill="none" height="12" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" width="12" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" style="margin-left:2px"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" x2="21" y1="14" y2="3"></line></svg></a>with limited time | <a href="https://github.com/shapkarin/shapkarin.me" target="_blank" rel="noreferrer">cource code<svg fill="none" height="12" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" width="12" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" style="margin-left:2px"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" x2="21" y1="14" y2="3"></line></svg></a></em></div><nav aria-label="Main Menu" class="Menu" id="menu" role="navigation"><ul class="Menu_List"><li class="Menu_List_Item"><a href="/" class="Menu__Item"><svg fill="currentColor" height="1.2em" stroke="currentColor" stroke-width="0" viewBox="0 0 24 24" width="1.2em" xmlns="http://www.w3.org/2000/svg"><path d="M11.03 2.59a1.501 1.501 0 0 1 1.94 0l7.5 6.363a1.5 1.5 0 0 1 .53 1.144V19.5a1.5 1.5 0 0 1-1.5 1.5h-5.75a.75.75 0 0 1-.75-.75V14h-2v6.25a.75.75 0 0 1-.75.75H4.5A1.5 1.5 0 0 1 3 19.5v-9.403c0-.44.194-.859.53-1.144ZM12 3.734l-7.5 6.363V19.5h5v-6.25a.75.75 0 0 1 .75-.75h3.5a.75.75 0 0 1 .75.75v6.25h5v-9.403Z"></path></svg> Home</a></li><li class="Menu_List_Item"><a href="/articles/" class="Menu__Item"><svg fill="currentColor" height="1em" stroke="currentColor" stroke-width="0" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M20 22H4C3.44772 22 3 21.5523 3 21V3C3 2.44772 3.44772 2 4 2H20C20.5523 2 21 2.44772 21 3V21C21 21.5523 20.5523 22 20 22ZM19 20V4H5V20H19ZM7 6H11V10H7V6ZM7 12H17V14H7V12ZM7 16H17V18H7V16ZM13 7H17V9H13V7Z"></path></svg> Articles</a></li><li class="Menu_List_Item"><a href="/github/repositories/" class="Menu__Item"><svg fill="currentColor" height="1em" stroke="currentColor" stroke-width="0" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M3 2.75A2.75 2.75 0 0 1 5.75 0h14.5a.75.75 0 0 1 .75.75v20.5a.75.75 0 0 1-.75.75h-6a.75.75 0 0 1 0-1.5h5.25v-4H6A1.5 1.5 0 0 0 4.5 18v.75c0 .716.43 1.334 1.05 1.605a.75.75 0 0 1-.6 1.374A3.251 3.251 0 0 1 3 18.75ZM19.5 1.5H5.75c-.69 0-1.25.56-1.25 1.25v12.651A2.989 2.989 0 0 1 6 15h13.5Z"></path><path d="M7 18.25a.25.25 0 0 1 .25-.25h5a.25.25 0 0 1 .25.25v5.01a.25.25 0 0 1-.397.201l-2.206-1.604a.25.25 0 0 0-.294 0L7.397 23.46a.25.25 0 0 1-.397-.2v-5.01Z"></path></svg> Repositories</a></li><li class="Menu_List_Item"><a href="/github/likes/" class="Menu__Item"><svg fill="currentColor" height="1.2em" stroke="currentColor" stroke-width="0" viewBox="0 0 24 24" width="1.2em" xmlns="http://www.w3.org/2000/svg"><path d="M12 .25a.75.75 0 0 1 .673.418l3.058 6.197 6.839.994a.75.75 0 0 1 .415 1.279l-4.948 4.823 1.168 6.811a.751.751 0 0 1-1.088.791L12 18.347l-6.117 3.216a.75.75 0 0 1-1.088-.79l1.168-6.812-4.948-4.823a.75.75 0 0 1 .416-1.28l6.838-.993L11.328.668A.75.75 0 0 1 12 .25Zm0 2.445L9.44 7.882a.75.75 0 0 1-.565.41l-5.725.832 4.143 4.038a.748.748 0 0 1 .215.664l-.978 5.702 5.121-2.692a.75.75 0 0 1 .698 0l5.12 2.692-.977-5.702a.748.748 0 0 1 .215-.664l4.143-4.038-5.725-.831a.75.75 0 0 1-.565-.41L12 2.694Z"></path></svg> Likes</a></li><li class="Menu_List_Item"><a href="/packages/" class="Menu__Item"><svg fill="currentColor" height="1.24em" stroke="currentColor" stroke-width="0" viewBox="0 0 24 24" width="1.24em" xmlns="http://www.w3.org/2000/svg"><path d="M20.001 3C20.5533 3 21.001 3.44772 21.001 4V20C21.001 20.5523 20.5533 21 20.001 21H4.00098C3.44869 21 3.00098 20.5523 3.00098 20V4C3.00098 3.44772 3.44869 3 4.00098 3H20.001ZM19.001 5H5.00098V19H19.001V5ZM17.001 7V17H14.501V9.5H12.001V17H7.00098V7H17.001Z"></path></svg> Packages</a></li><li class="Menu_List_Item"><a href="/creative/" class="Menu__Item"><svg fill="currentColor" height="1em" stroke="currentColor" stroke-width="0" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M4 2.99658H20C20.5523 2.99658 21 3.4443 21 3.99658V8.99658C21 9.54887 20.5523 9.99658 20 9.99658H4C3.44772 9.99658 3 9.54887 3 8.99658V3.99658C3 3.4443 3.44772 2.99658 4 2.99658ZM6 11.9966H12C12.5523 11.9966 13 12.4443 13 12.9966V15.9966H14V21.9966H10V15.9966H11V13.9966H5C4.44772 13.9966 4 13.5489 4 12.9966V10.9966H6V11.9966ZM17.7322 13.7288L19.5 11.961L21.2678 13.7288C22.2441 14.7051 22.2441 16.288 21.2678 17.2643C20.2915 18.2407 18.7085 18.2407 17.7322 17.2643C16.7559 16.288 16.7559 14.7051 17.7322 13.7288Z"></path></svg> Creative</a></li></ul><button class="Menu__Item Menu__Item--unselect Menu__Item--bg"><svg fill="currentColor" height="1em" stroke="currentColor" stroke-width="0" viewBox="0 0 512 512" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M433 288.8c-7.7 0-14.3 5.9-14.9 13.6-6.9 83.1-76.8 147.9-161.8 147.9-89.5 0-162.4-72.4-162.4-161.4 0-87.6 70.6-159.2 158.2-161.4 2.3-.1 4.1 1.7 4.1 4v50.3c0 12.6 13.9 20.2 24.6 13.5L377 128c10-6.3 10-20.8 0-27.1l-96.1-66.4c-10.7-6.7-24.6.9-24.6 13.5v45.7c0 2.2-1.7 4-3.9 4C148 99.8 64 184.6 64 288.9 64 394.5 150.1 480 256.3 480c100.8 0 183.4-76.7 191.6-175.1.8-8.7-6.2-16.1-14.9-16.1z"></path></svg> bg upd</button></nav><div class="Wrap"><div class="Page"><a href="/" class="CloseButton" aria-label="Back to the main page" style=""><svg fill="currentColor" height="1em" stroke="currentColor" stroke-width="0" viewBox="0 0 512 512" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M405 136.798L375.202 107 256 226.202 136.798 107 107 136.798 226.202 256 107 375.202 136.798 405 256 285.798 375.202 405 405 375.202 285.798 256z"></path></svg></a><div class="Article Page__Article Page__Inner"><a href="/articles/" class="Article__GoBack">‚Üê All articles</a><div><h1 id="unlocking-node-js-performance-harnessing-multi-core-power-with-the-cluster-module">Unlocking Node.js Performance: Harnessing Multi-Core Power with the <code>cluster</code> Module</h1><p>It's a common sight in the Node.js world: powerful servers with multiple CPU cores, yet our applications often hum along on just a single core. Many Node.js production applications, even on a 16-core machine, are still effectively single-threaded.</p><p><strong>Why?</strong> The rush to adopt tools like Docker, Kubernetes, or process managers like PM2 often leads developers to overlook a powerful, built-in solution: the Node.js <code>cluster</code> module.</p><p>This article dives into how you can leverage the <code>cluster</code> module to effortlessly scale your Node.js applications across all available CPU cores, often in under 20 lines of code, with no external dependencies.</p><h2 id="table-of-contents">Table of Contents</h2><ul><li><a href="#the-single-core-bottleneck" target="_self">The Single-Core Bottleneck</a></li><li><a href="#enter-the-cluster-module" target="_self">Enter the <code>cluster</code> Module</a><ul><li><a href="#a-simple-clustering-example" target="_self">A Simple Clustering Example</a></li></ul></li><li><a href="#cluster-vs-worker_threads-understanding-the-difference" target="_self"><code>cluster</code> vs. <code>worker_threads</code>: Understanding the Difference</a></li><li><a href="#why-not-just-use-pm2-docker-or-kubernetes" target="_self">Why Not Just Use PM2, Docker, or Kubernetes?</a></li><li><a href="#benefits-of-using-cluster" target="_self">Benefits of Using <code>cluster</code></a></li><li><a href="#graceful-shutdown-and-inter-process-communication-ipc" target="_self">Graceful Shutdown and Inter-Process Communication (IPC)</a><ul><li><a href="#example-graceful-shutdown" target="_self">Example: Graceful Shutdown</a></li></ul></li><li><a href="#when-is-cluster-the-right-choice" target="_self">When is <code>cluster</code> the Right Choice?</a></li><li><a href="#when-to-look-beyond-cluster-or-use-it-in-conjunction" target="_self">When to Look Beyond <code>cluster</code> (or use it in conjunction)</a></li><li><a href="#conclusion-dont-leave-performance-on-the-table" target="_self">Conclusion: Don't Leave Performance on the Table</a></li></ul><h2 id="the-single-core-bottleneck">The Single-Core Bottleneck</h2><p>Node.js is renowned for its non-blocking, event-driven architecture, making it highly efficient for I/O-bound operations. However, by default, a single Node.js process runs on a single CPU core. If you have a multi-core server, the other cores remain idle, and your application's performance is capped by the capacity of that one core. This is like having a multi-lane highway but forcing all traffic into a single lane.</p><p><img alt="Graph diagram" src="/api/articles/light/node.js-multi-core-cluster-0.svg"></p><pre><details><summary>Show Mermaid Code</summary><div style='color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo,Monaco,Consolas,"Andale Mono","Ubuntu Mono","Courier New",monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;tab-size:4;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#1e1e1e'><code class="language-mermaid" style='white-space:pre;color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo,Monaco,Consolas,"Andale Mono","Ubuntu Mono","Courier New",monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;tab-size:4;hyphens:none'><span class="token" style="color:#569cd6">graph</span><span> TD
</span><span>    A</span><span class="token text" style="color:#ce9178">[Multi-Core Server]</span><span> </span><span class="token" style="color:#569cd6">--></span><span> B</span><span class="token text" style="color:#ce9178">[CPU Core 1]</span><span>
</span><span>    A </span><span class="token" style="color:#569cd6">--></span><span> C</span><span class="token text" style="color:#ce9178">[CPU Core 2 - Idle]</span><span>
</span><span>    A </span><span class="token" style="color:#569cd6">--></span><span> D</span><span class="token text" style="color:#ce9178">[CPU Core 3 - Idle]</span><span>
</span><span>    A </span><span class="token" style="color:#569cd6">--></span><span> E</span><span class="token text" style="color:#ce9178">[CPU Core 4 - Idle]</span><span>
</span>    
<span>    F</span><span class="token text" style="color:#ce9178">[Node.js Process]</span><span> </span><span class="token" style="color:#569cd6">--></span><span> B
</span><span>    G</span><span class="token text" style="color:#ce9178">[All Requests]</span><span> </span><span class="token" style="color:#569cd6">--></span><span> F
</span>    
<span>    H</span><span class="token text" style="color:#ce9178">[With Cluster Module]</span><span> </span><span class="token" style="color:#569cd6">--></span><span> I</span><span class="token text" style="color:#ce9178">[Master Process]</span><span>
</span><span>    I </span><span class="token" style="color:#569cd6">--></span><span> J</span><span class="token text" style="color:#ce9178">[Worker 1 - Core 1]</span><span>
</span><span>    I </span><span class="token" style="color:#569cd6">--></span><span> K</span><span class="token text" style="color:#ce9178">[Worker 2 - Core 2]</span><span>
</span><span>    I </span><span class="token" style="color:#569cd6">--></span><span> L</span><span class="token text" style="color:#ce9178">[Worker 3 - Core 3]</span><span>
</span><span>    I </span><span class="token" style="color:#569cd6">--></span><span> M</span><span class="token text" style="color:#ce9178">[Worker 4 - Core 4]</span><span>
</span>    
<span>    N</span><span class="token text" style="color:#ce9178">[Load Balancer]</span><span> </span><span class="token" style="color:#569cd6">--></span><span> J
</span><span>    N </span><span class="token" style="color:#569cd6">--></span><span> K
</span><span>    N </span><span class="token" style="color:#569cd6">--></span><span> L
</span><span>    N </span><span class="token" style="color:#569cd6">--></span><span> M</span></code></div></details></pre><h2 id="enter-the-cluster-module">Enter the <code>cluster</code> Module</h2><p>The <code>cluster</code> module is a native part of Node.js that allows you to create child processes (workers) that can all share server ports. This enables true multi-process parallelism, allowing your application to utilize multiple CPU cores effectively.</p><p>Here's the core idea:</p><ul><li>One <strong>master process</strong> is responsible for forking worker processes.</li><li>Multiple <strong>worker processes</strong> (typically one per CPU core) handle incoming requests.</li><li>All worker processes can listen on the same port, and the master process distributes incoming connections among them.</li></ul><h3 id="a-simple-clustering-example">A Simple Clustering Example</h3><p>Let's see how easy it is to set up a basic clustered HTTP server.</p><pre><h3 class="Article__CondingLang">javascript:</h3><div style='color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo,Monaco,Consolas,"Andale Mono","Ubuntu Mono","Courier New",monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;tab-size:4;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#1e1e1e'><code class="language-javascript" style='white-space:pre;color:#9cdcfe;font-size:13px;text-shadow:none;font-family:Menlo,Monaco,Consolas,"Andale Mono","Ubuntu Mono","Courier New",monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;tab-size:4;hyphens:none'><span class="token" style="color:#569cd6">const</span><span> cluster </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#dcdcaa">require</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#ce9178">'node:cluster'</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span></span><span class="token" style="color:#569cd6">const</span><span> http </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#dcdcaa">require</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#ce9178">'node:http'</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span></span><span class="token" style="color:#569cd6">const</span><span> numCPUs </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#dcdcaa">require</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#ce9178">'node:os'</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">availableParallelism</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span></span><span class="token" style="color:#569cd6">const</span><span> process </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#dcdcaa">require</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#ce9178">'node:process'</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span>
<span></span><span class="token" style="color:#c586c0">if</span><span> </span><span class="token" style="color:#d4d4d4">(</span><span>cluster</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">isPrimary</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>  </span><span class="token" style="color:#4ec9b0">console</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">log</span><span class="token" style="color:#d4d4d4">(</span><span class="token template-string template-punctuation" style="color:#ce9178">`</span><span class="token template-string" style="color:#ce9178">Primary </span><span class="token template-string" style="color:#569cd6">${</span><span class="token template-string" style="color:#9cdcfe">process</span><span class="token template-string" style="color:#d4d4d4">.</span><span class="token template-string property-access" style="color:#9cdcfe">pid</span><span class="token template-string" style="color:#569cd6">}</span><span class="token template-string" style="color:#ce9178"> is running</span><span class="token template-string template-punctuation" style="color:#ce9178">`</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span>
<span>  </span><span class="token" style="color:#6a9955">// Fork workers.</span><span>
</span><span>  </span><span class="token" style="color:#c586c0">for</span><span> </span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#569cd6">let</span><span> i </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#b5cea8">0</span><span class="token" style="color:#d4d4d4">;</span><span> i </span><span class="token" style="color:#d4d4d4">&lt;</span><span> numCPUs</span><span class="token" style="color:#d4d4d4">;</span><span> i</span><span class="token" style="color:#d4d4d4">++</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>    cluster</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">fork</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>  </span><span class="token" style="color:#d4d4d4">}</span><span>
</span>
<span>  cluster</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">on</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#ce9178">'exit'</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#9cdcfe">worker</span><span class="token" style="color:#d4d4d4">,</span><span class="token" style="color:#9cdcfe"> code</span><span class="token" style="color:#d4d4d4">,</span><span class="token" style="color:#9cdcfe"> signal</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#569cd6">=></span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>    </span><span class="token" style="color:#4ec9b0">console</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">log</span><span class="token" style="color:#d4d4d4">(</span><span class="token template-string template-punctuation" style="color:#ce9178">`</span><span class="token template-string" style="color:#ce9178">worker </span><span class="token template-string" style="color:#569cd6">${</span><span class="token template-string" style="color:#9cdcfe">worker</span><span class="token template-string" style="color:#d4d4d4">.</span><span class="token template-string property-access" style="color:#9cdcfe">process</span><span class="token template-string" style="color:#d4d4d4">.</span><span class="token template-string property-access" style="color:#9cdcfe">pid</span><span class="token template-string" style="color:#569cd6">}</span><span class="token template-string" style="color:#ce9178"> died</span><span class="token template-string template-punctuation" style="color:#ce9178">`</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>    </span><span class="token" style="color:#6a9955">// Optionally, fork a new worker to replace the dead one</span><span>
</span><span>    </span><span class="token" style="color:#6a9955">// cluster.fork(); </span><span>
</span><span>  </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span></span><span class="token" style="color:#d4d4d4">}</span><span> </span><span class="token" style="color:#c586c0">else</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>  </span><span class="token" style="color:#6a9955">// Workers can share any TCP connection</span><span>
</span><span>  </span><span class="token" style="color:#6a9955">// In this case it is an HTTP server</span><span>
</span><span>  http</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">createServer</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#9cdcfe">req</span><span class="token" style="color:#d4d4d4">,</span><span class="token" style="color:#9cdcfe"> res</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#569cd6">=></span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>    res</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">writeHead</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#b5cea8">200</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>    res</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">end</span><span class="token" style="color:#d4d4d4">(</span><span class="token template-string template-punctuation" style="color:#ce9178">`</span><span class="token template-string" style="color:#ce9178">Hello from worker </span><span class="token template-string" style="color:#569cd6">${</span><span class="token template-string" style="color:#9cdcfe">process</span><span class="token template-string" style="color:#d4d4d4">.</span><span class="token template-string property-access" style="color:#9cdcfe">pid</span><span class="token template-string" style="color:#569cd6">}</span><span class="token template-string" style="color:#ce9178">\n</span><span class="token template-string template-punctuation" style="color:#ce9178">`</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>  </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">listen</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#b5cea8">8000</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span>
<span>  </span><span class="token" style="color:#4ec9b0">console</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">log</span><span class="token" style="color:#d4d4d4">(</span><span class="token template-string template-punctuation" style="color:#ce9178">`</span><span class="token template-string" style="color:#ce9178">Worker </span><span class="token template-string" style="color:#569cd6">${</span><span class="token template-string" style="color:#9cdcfe">process</span><span class="token template-string" style="color:#d4d4d4">.</span><span class="token template-string property-access" style="color:#9cdcfe">pid</span><span class="token template-string" style="color:#569cd6">}</span><span class="token template-string" style="color:#ce9178"> started</span><span class="token template-string template-punctuation" style="color:#ce9178">`</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span></span><span class="token" style="color:#d4d4d4">}</span></code></div></pre><p>In this example:</p><ol><li>We import the necessary modules: <code>cluster</code>, <code>http</code>, <code>os</code> (to get the number of CPUs), and <code>process</code>.</li><li>We check if the current process is the <code>cluster.isPrimary</code> (master) process.</li><li><strong>If it's the primary process:</strong><ul><li>It logs its PID.</li><li>It iterates <code>numCPUs</code> times, calling <code>cluster.fork()</code> to create a new worker process for each core.</li><li>It listens for the <code>exit</code> event on the <code>cluster</code> object to know if a worker process has died. You might want to restart a worker if it crashes.</li></ul></li><li><strong>If it's a worker process (<code>else</code> block):</strong><ul><li>It creates an HTTP server that listens on port 8000.</li><li>It logs its PID and a message indicating it has started.</li></ul></li></ol><p>Now, if you run this code on a machine with 4 CPU cores, the primary process will spawn 4 worker processes. Each worker will share port 8000, and incoming requests will be distributed among them.</p><p><strong>To run this:</strong></p><ol><li>Save the code as <code>app.js</code>.</li><li>Run <code>node app.js</code> in your terminal.</li><li>Open your browser or use <code>curl</code> to access <code>http://localhost:8000</code> multiple times. You should see responses from different worker PIDs.</li></ol><h2 id="cluster-vs-worker_threads-understanding-the-difference"><code>cluster</code> vs. <code>worker_threads</code>: Understanding the Difference</h2><p>It's crucial not to confuse the <code>cluster</code> module with <code>worker_threads</code>. They serve different purposes:</p><ul><li><strong><code>cluster</code></strong>: Designed for scaling <strong>I/O-bound workloads</strong> by creating separate <strong>processes</strong>. Each worker process has its own memory space and event loop. This is ideal for applications like web servers that handle many concurrent connections.</li><li><strong><code>worker_threads</code></strong>: Designed for offloading <strong>CPU-intensive tasks</strong> to separate <strong>threads</strong> <em>within the same process</em>. Threads share memory space with the parent process, making them suitable for parallelizing computationally heavy operations without the overhead of inter-process communication for data sharing.</li></ul><p><strong>Think of it this way:</strong></p><ul><li>Use <code>cluster</code> when you want multiple instances of your application handling network requests.</li><li>Use <code>worker_threads</code> when you have a specific, long-running calculation (like image processing or complex data analysis) within a single request that would otherwise block the main event loop.</li></ul><h2 id="why-not-just-use-pm2-docker-or-kubernetes">Why Not Just Use PM2, Docker, or Kubernetes?</h2><p>Tools like PM2, Docker, and Kubernetes are fantastic for process management, deployment, and orchestration at scale. However, for the specific task of utilizing multiple CPU cores for a <em>single Node.js application on a single machine</em>, the <code>cluster</code> module is often a simpler, more direct, and dependency-free solution.</p><ul><li><strong>PM2's cluster mode</strong> essentially uses the <code>cluster</code> module under the hood. While PM2 adds features like monitoring, logging, and automatic restarts, understanding the <code>cluster</code> module itself gives you foundational knowledge.</li><li><strong>Docker and Kubernetes</strong> are about containerization and orchestration. You can run a clustered Node.js app <em>inside</em> a Docker container. If you configure your K8s deployment to run one container per core, you might be overcomplicating things if simple process-based scaling with <code>cluster</code> would suffice for that node.</li></ul><p>The point isn't that these tools are bad; it's that <strong>real engineers understand their runtime before reaching for higher-level abstractions.</strong> Knowing how Node.js handles concurrency natively can lead to more efficient and lightweight solutions.</p><h2 id="benefits-of-using-cluster">Benefits of Using <code>cluster</code></h2><ul><li><strong>Maximized CPU Utilization:</strong> Directly leverage all available CPU cores on your server.</li><li><strong>Improved Performance & Throughput:</strong> Handle more concurrent requests and potentially reduce latency for I/O-bound tasks.</li><li><strong>Increased Resilience:</strong> If a worker process crashes, the primary process can restart it, and other workers can continue handling requests, leading to zero-downtime deployments or graceful degradation.</li><li><strong>No External Dependencies:</strong> It's built into Node.js.</li><li><strong>Simplicity for Core Scaling:</strong> As shown, basic implementation is very straightforward.</li></ul><h2 id="graceful-shutdown-and-inter-process-communication-ipc">Graceful Shutdown and Inter-Process Communication (IPC)</h2><p>The <code>cluster</code> module also provides mechanisms for:</p><ul><li><strong>Graceful Shutdown:</strong> You can instruct workers to finish handling existing requests before shutting down, preventing abrupt disconnections for users.</li><li><strong>Inter-Process Communication (IPC):</strong> The primary and worker processes can send messages to each other using <code>process.send()</code> (in workers) and <code>worker.send()</code> (in the primary), and listening to <code>message</code> events. This can be used for coordinating tasks, sharing state (carefully!), or custom load balancing logic.</li></ul><h3 id="example-graceful-shutdown">Example: Graceful Shutdown</h3><pre><h3 class="Article__CondingLang">javascript:</h3><div style='color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo,Monaco,Consolas,"Andale Mono","Ubuntu Mono","Courier New",monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;tab-size:4;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#1e1e1e'><code class="language-javascript" style='white-space:pre;color:#9cdcfe;font-size:13px;text-shadow:none;font-family:Menlo,Monaco,Consolas,"Andale Mono","Ubuntu Mono","Courier New",monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;tab-size:4;hyphens:none'><span class="token" style="color:#6a9955">// (Continuing from the previous example, in the primary process block)</span><span>
</span>
<span></span><span class="token" style="color:#6a9955">// ... inside cluster.isPrimary block</span><span>
</span><span></span><span class="token" style="color:#6a9955">// cluster.on('exit', ...); // Keep this</span><span>
</span>
<span></span><span class="token" style="color:#6a9955">// Handle SIGINT (Ctrl+C) for graceful shutdown</span><span>
</span><span>process</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">on</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#ce9178">'SIGINT'</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#569cd6">=></span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>  </span><span class="token" style="color:#4ec9b0">console</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">log</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#ce9178">'SIGINT received. Shutting down workers...'</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>  </span><span class="token" style="color:#c586c0">for</span><span> </span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#569cd6">const</span><span> id </span><span class="token" style="color:#569cd6">in</span><span> cluster</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">workers</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>    </span><span class="token" style="color:#569cd6">const</span><span> worker </span><span class="token" style="color:#d4d4d4">=</span><span> cluster</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">workers</span><span class="token" style="color:#d4d4d4">[</span><span>id</span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>    </span><span class="token" style="color:#c586c0">if</span><span> </span><span class="token" style="color:#d4d4d4">(</span><span>worker</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>      </span><span class="token" style="color:#4ec9b0">console</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">log</span><span class="token" style="color:#d4d4d4">(</span><span class="token template-string template-punctuation" style="color:#ce9178">`</span><span class="token template-string" style="color:#ce9178">Sending disconnect to worker </span><span class="token template-string" style="color:#569cd6">${</span><span class="token template-string" style="color:#9cdcfe">worker</span><span class="token template-string" style="color:#d4d4d4">.</span><span class="token template-string property-access" style="color:#9cdcfe">process</span><span class="token template-string" style="color:#d4d4d4">.</span><span class="token template-string property-access" style="color:#9cdcfe">pid</span><span class="token template-string" style="color:#569cd6">}</span><span class="token template-string template-punctuation" style="color:#ce9178">`</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>      worker</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">disconnect</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span> </span><span class="token" style="color:#6a9955">// Ask worker to disconnect</span><span>
</span><span>    </span><span class="token" style="color:#d4d4d4">}</span><span>
</span><span>  </span><span class="token" style="color:#d4d4d4">}</span><span>
</span><span>  </span><span class="token" style="color:#6a9955">// Allow workers time to disconnect before primary exits</span><span>
</span><span>  </span><span class="token" style="color:#dcdcaa">setTimeout</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#569cd6">=></span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>    </span><span class="token" style="color:#4ec9b0">console</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">log</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#ce9178">'Exiting primary process.'</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>    process</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">exit</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#b5cea8">0</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>  </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#b5cea8">5000</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span> </span><span class="token" style="color:#6a9955">// Adjust timeout as needed</span><span>
</span><span></span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span>
<span></span><span class="token" style="color:#6a9955">// ...</span><span>
</span>
<span></span><span class="token" style="color:#6a9955">// (In the worker process block)</span><span>
</span><span></span><span class="token" style="color:#6a9955">// ... inside the else block (worker process)</span><span>
</span><span></span><span class="token" style="color:#6a9955">// http.createServer(...).listen(8000); // Keep this</span><span>
</span><span></span><span class="token" style="color:#6a9955">// console.log(`Worker ${process.pid} started`); // Keep this</span><span>
</span>
<span>process</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">on</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#ce9178">'disconnect'</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#569cd6">=></span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>  </span><span class="token" style="color:#4ec9b0">console</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">log</span><span class="token" style="color:#d4d4d4">(</span><span class="token template-string template-punctuation" style="color:#ce9178">`</span><span class="token template-string" style="color:#ce9178">Worker </span><span class="token template-string" style="color:#569cd6">${</span><span class="token template-string" style="color:#9cdcfe">process</span><span class="token template-string" style="color:#d4d4d4">.</span><span class="token template-string property-access" style="color:#9cdcfe">pid</span><span class="token template-string" style="color:#569cd6">}</span><span class="token template-string" style="color:#ce9178"> disconnecting...</span><span class="token template-string template-punctuation" style="color:#ce9178">`</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>  </span><span class="token" style="color:#6a9955">// Perform any cleanup here, e.g., close database connections</span><span>
</span><span>  </span><span class="token" style="color:#6a9955">// This example doesn't have specific cleanup, server will close automatically</span><span>
</span><span></span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span></code></div></pre><p>In the worker, when <code>disconnect</code> is called by the primary, the server will stop accepting new connections, and once all existing connections are closed, the worker will exit. The <code>SIGINT</code> handler in the primary process ensures that all workers are signaled to disconnect before the primary itself exits.</p><h2 id="when-is-cluster-the-right-choice">When is <code>cluster</code> the Right Choice?</h2><ul><li><strong>I/O-Bound Applications:</strong> Web servers, API backends, applications handling many network requests.</li><li><strong>Improving Throughput on Multi-Core Machines:</strong> When your single Node.js process is becoming a CPU bottleneck due to the sheer volume of requests (even if each request is I/O-bound).</li><li><strong>Basic Fault Tolerance:</strong> Restarting crashed workers.</li></ul><h2 id="when-to-look-beyond-cluster-or-use-it-in-conjunction">When to Look Beyond <code>cluster</code> (or use it in conjunction):</h2><ul><li><strong>CPU-Bound Tasks:</strong> For heavy computations within a single request path, use <code>worker_threads</code> to offload that specific task without blocking the event loop of a cluster worker.</li><li><strong>Complex Orchestration & Scaling Across Multiple Machines:</strong> This is where Kubernetes, Docker Swarm, or similar platforms shine. <code>cluster</code> scales <em>within</em> a single machine.</li><li><strong>Advanced Process Management Features:</strong> If you need sophisticated monitoring, log aggregation, and deployment strategies out-of-the-box, tools like PM2 can be very helpful (and as mentioned, PM2 uses <code>cluster</code> for its clustering mode).</li><li><strong>Shared State Management:</strong> Sharing state between worker processes in a <code>cluster</code> can be complex as they have separate memory. If your application relies heavily on in-memory shared state that is difficult to manage via IPC or external stores (like Redis), you might need to rethink your architecture or accept that <code>cluster</code> might add complexity here.</li></ul><h2 id="conclusion-don-t-leave-performance-on-the-table">Conclusion: Don't Leave Performance on the Table</h2><p>If you're running a Node.js HTTP server or any I/O-intensive application in production on a multi-core machine without utilizing the <code>cluster</code> module, you are likely bottlenecking your application by design.</p><p>Before reaching for complex orchestration tools or simply spinning up one container per core without understanding the underlying mechanisms, take a moment to explore the power and simplicity of Node.js's native <code>cluster</code> module. It's a testament to the "batteries-included" philosophy of Node.js and a critical tool for any engineer serious about performance and scalability.</p><p><strong>So, have you shipped a clustered Node.js app? Or are you still letting those extra CPU cores gather dust?</strong> It's time to understand your runtime and unlock the full potential of your Node.js applications.</p><hr><p><strong>Further Reading:</strong></p><ul><li><a href="https://nodejs.org/api/cluster.html" target="_blank" rel="noreferrer">Node.js Cluster Documentation<svg fill="none" height="12" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" width="12" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" style="margin-left:2px"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" x2="21" y1="14" y2="3"></line></svg></a></li><li><a href="https://nodejs.org/api/worker_threads.html" target="_blank" rel="noreferrer">Node.js Worker Threads Documentation<svg fill="none" height="12" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" width="12" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" style="margin-left:2px"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" x2="21" y1="14" y2="3"></line></svg></a></li></ul></div></div></div></div><footer class="Footer">The API for this site <a href="https://github.com/shapkarin/shapkarin.me/tree/master/src/Generate-Backend" target="_blank" rel="noreferrer">is generated<svg fill="none" height="12" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" width="12" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" style="margin-left:2px"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" x2="21" y1="14" y2="3"></line></svg></a>and stored as <a href="https://github.com/shapkarin/shapkarin.me/tree/gh-pages/api" target="_blank" rel="noreferrer">JSON and Markdown<svg fill="none" height="12" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" width="12" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" style="margin-left:2px"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" x2="21" y1="14" y2="3"></line></svg></a>on GitHub Pages.<br>It <a href="https://github.com/shapkarin/shapkarin.me/blob/main/.github/workflows/build-deploy.yml" target="_blank" rel="noreferrer">uses Github Actions<svg fill="none" height="12" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" width="12" xmlns="http://www.w3.org/2000/svg" stroke-linecap="round" stroke-linejoin="round" style="margin-left:2px"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" x2="21" y1="14" y2="3"></line></svg></a>to help with CI and generates a static version.</footer></div><canvas height="850" id="background" width="480"></canvas></body></html>